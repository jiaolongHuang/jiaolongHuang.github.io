<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> chart-pie · 小路口</title><meta name="description" content="chart-pie - jiaolongHuang"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://jiaolongHuang.github.io/atom.xml" title="小路口"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/minel" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/jiaolonghuang" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">chart-pie</h1><div class="post-info">Aug 14, 2015</div><div class="post-content"><p>看了w3cplus上的<a href="http://www.w3cplus.com/css3/designing-simple-pie-charts-with-css.html" target="_blank" rel="external">这篇博文</a>后，动手实践了下，弄清楚了实现的原理，同时在此过程中也发现了一些知识盲点，再此记录下。<br><a id="more"></a><br>3种方式，方便程度逐渐递增，但是浏览器的支持程度却也慢慢变差</p>
<h2 id="css3实现饼图"><a href="#css3实现饼图" class="headerlink" title="css3实现饼图"></a>css3实现饼图</h2><p><a href="http://jiaolonghuang.github.io/practice/pie/css3-chart.html">小呆萌</a><br>主要原理：整个图可以看成是2层纸板，最上面的纸板是半个的，下面的纸板是一个整圆，但是颜色是一半为底色A，一半为需要展现的颜色B。一开始的时候，上面的纸板颜色与底色相同是A，因为是0%，然后不断旋转角度，让需要展现的颜色B逐渐露出来。但是当过了50%之后，上面的纸板就需要变成颜色B了，因为需要展现的颜色应该是越变越多的。</p>
<ul>
<li><p>一半一半颜色的实现<br><code>background-image: linear-gradient( to right, transparent 50%, #ed885f 0);</code></p>
</li>
<li><p><code>border-radius: 0 100% 100% 0 / 50%;</code><br>以<code>/</code>为分界点，左边的是边框圆角的x半径，右边是y半径。x和y都遵循TRBL(上右下左)都顺序。因此上面的border-radius实际可表示为：<br>border-top-left-radius: 0 50%;<br>bordr-top-right-radius: 100% 50%;<br>border-bottom-right-radius: 100% 50%;<br>border-bottom-left-radius: 0 50%;</p>
</li>
<li><p>animation-timing-function中的steps<br>steps(1, start) = step-start;<br>steps(1, end) = step-end;<br>steps(n, start)表示将2个关键帧之间的效果平均分为n步来过渡实现，其中呢，自动略过0%的部分，以下一帧的显示效果来填充间隔动画; 反之，亦然。<br>比如</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="selector-class">.div</span>&#123;</div><div class="line">	<span class="attribute">width</span>: <span class="number">100px</span>;</div><div class="line">	<span class="attribute">height</span>: <span class="number">100px</span>;</div><div class="line">	<span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</div><div class="line">	<span class="attribute">background-color</span>: <span class="number">#333</span>;</div><div class="line">	<span class="attribute">animation-name</span>: changeBg;</div><div class="line">	<span class="attribute">animation-duration</span>: <span class="number">10s</span>;</div><div class="line">	<span class="attribute">animation-timing-function</span>: <span class="built_in">steps</span>( 2, start );</div><div class="line">&#125;</div><div class="line">@<span class="keyword">keyframes</span> changeBg&#123;</div><div class="line">	<span class="selector-tag">from</span>&#123;</div><div class="line">		<span class="attribute">background-color</span>: red;</div><div class="line">	&#125;</div><div class="line">	50%&#123;</div><div class="line">		<span class="attribute">background-color</span>: yellow;</div><div class="line">	&#125;</div><div class="line">	100%&#123;</div><div class="line">		<span class="attribute">background-color</span>: green;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>这段代码的意思就是，从0%－50%之间会执行5s，并且此期间，动画会分成2步走，每步走2.5s，第一步首先背景会略过红色，而直接变成橙色，介于红色与黄色之间的一个过渡色，第二步，变成黄色，也就是以50%的这一帧的效果来填充了。剩下的50%同理。如下图所示。<br><img src="http://p8.qhimg.com/d/inn/50b09d40/20150814093917.png" alt=""></p>
<ul>
<li><p>下面两段代码的意思是一样的。没必要这样做，在 0% 和 100% keyframe中声明相同的属性和值，浏览器会在动画开始和结束时自动处理属性值。</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">@<span class="keyword">keyframes</span> changeBg&#123;</div><div class="line">	50%&#123;</div><div class="line">		<span class="attribute">background-color</span>: yellow;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">@<span class="keyword">keyframes</span> changeBg&#123;</div><div class="line">	<span class="selector-tag">from</span>&#123;</div><div class="line">		<span class="attribute">background-color</span>: 默认值;</div><div class="line">	&#125;</div><div class="line">	50%&#123;</div><div class="line">		<span class="attribute">background-color</span>: yellow;</div><div class="line">	&#125;</div><div class="line">	100%&#123;</div><div class="line">		<span class="attribute">background-color</span>: 默认值;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>animation-delay: 负值<br>就好像效果已经在动画开始之前就已经开始进行了。等动画开始的时候，就在那个点继续进行。比如一个效果需要进行15s，而delay了10s，那么在动画开始的时候，我们看到的就是这个效果从第10s之后直至15s的剩余过程。</p>
</li>
</ul>
<h2 id="svg实现饼图"><a href="#svg实现饼图" class="headerlink" title="svg实现饼图"></a>svg实现饼图</h2><p><a href="http://jiaolonghuang.github.io/practice/pie/svg-chart.html">小呆萌</a><br>主要原理：还是利用stroke-dasharray的原理。一个技巧，虚线之间的间距，取一个大于或等于我们当前圆的周长的边距。如果stroke-width比较小出现的就是进度条式的样子。</p>
<h2 id="conic-gradient"><a href="#conic-gradient" class="headerlink" title="conic-gradient"></a>conic-gradient</h2><p>一行css搞定<code>background: conic-gradient(#655 40%, yellowgreen 0);</code>,但是目前还没有浏览器直接支持这个属性，LEA VEROU自己写了一个polyfill来实现(Conical gradients, today!)[<a href="http://lea.verou.me/2015/06/conical-gradients-today/" target="_blank" rel="external">http://lea.verou.me/2015/06/conical-gradients-today/</a>]</p>
</div></article></div></section><footer><div class="paginator"><a href="/2015/08/14/http-history/" class="prev">PREV</a><a href="/2015/08/05/svg-chart/" class="next">NEXT</a></div><div data-thread-key="2015/08/14/chart-pie/" data-title="chart-pie" data-url="http://jiaolongHuang.github.io/2015/08/14/chart-pie/" data-author-key="1" class="ds-thread"></div><script>var duoshuoQuery = {short_name:"minel"};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
     || document.getElementsByTagName('body')[0]).appendChild(ds);
})();

</script><div class="copyright"><p>友情链接：<a href="https://imququ.com" class="links-item">QuQu</a><a href="http://anjia.github.io" class="links-item">跑跑佳</a><a href="http://www.imwineki.cn/" class="links-item">Wineki</a><a href="http://westpsk.com/" class="links-item">ivan</a></p><p>© 2015 - 2016 <a href="http://jiaolongHuang.github.io">jiaolongHuang</a>. Love this theme <a href="https://github.com/pinggod/hexo-theme-apollo">apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>